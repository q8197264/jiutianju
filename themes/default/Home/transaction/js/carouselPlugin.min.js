(function() {$.fn.carouselPlugin = function(options){var defalutes = {'autoChange':true, 'autoTime':5000, 'changeHandle':true, 'pointNav':true, 'changeSpend':800 }; var ops=$.extend({},defalutes, options); var b = this.find('.item'), u = this.find('ul'), li = u.find('li'), a = this.find('.arrow'); p = this.find('.prev'); n = this.find('.next'); _index = 0; if(ops.changeHandle){a.css("display","block"); }; if(ops.pointNav){u.css("display","block"); }; li.on("click",function(){$(this).addClass("active").siblings("li").stop(true).removeClass("active"); _index = $(this).index(); b.eq(_index).fadeIn(ops.changeSpend).siblings(".item").stop(true).fadeOut(ops.changeSpend); }); function init(){if(ops.autoChange){_index ++; if(_index > (li.length-1)){_index = 0; } li.eq(_index).trigger("click"); } } time = setInterval(init,ops.autoTime); this.mouseover(function(){clearInterval(time); }).mouseleave(function(){time = setInterval(init,ops.autoTime); }); p.click(function(){var i = $(this).parent().find('ul .active').index(); var l = li.length; if( i > 0 && i <= l ){li.eq(i-1).click(); }else if( i == 0 ){li.eq(l-1).click(); } }); n.click(function(){var i = $(this).parent().find('ul .active').index(); var l = li.length; if( i >= 0 && i <= l-2 ){li.eq(i+1).click(); }else if( i == l-1 ){li.eq(0).click(); } }); }; })();